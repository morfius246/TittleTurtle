@using System.Globalization
@model TitleTurtle.Models.Article

@{
    ViewBag.Title = "Show";
    Layout = "/Views/Shared/_Layout.cshtml";
}

<head>
    <title>@Model.ArticleTitle</title>
</head>
<body>
    @using (Html.BeginForm("ShowArticle", "Home"))
    {
        <div class="main">
            <h2>@Html.DisplayFor(model => model.ArticleTitle)</h2>
            @Html.HiddenFor(model => model.ArticleID)
            @Html.DisplayFor(model => model.ArticleText)<br>
            @if (Model.MedialInArticles.Count != 0)
            {
                try
                {
                    @Html.Raw("<img style='width:260px; height:180px;' src=\"data:image/jpeg;base64,"
                                                                          + Convert.ToBase64String(Model.MedialInArticles.First().Media.MediaData) + "\" />")
                }
                catch (Exception)
                {

                }
            }
            <p>Добавил:@Model.User.UserFirstName</p>
            <p>Дата создания: @Model.Edits.ElementAt(0).Date</p>
            @if (Model.Edits.Count() > 1)
            {
                <p>
                    Дата последнего изменения:
                    @Model.Edits.ElementAt(Model.Edits.Count() - 1).Date
                </p>
            }
            <p style="color:chartreuse">@Model.Ratings.ElementAt(0).RatingLike</p>
            <p style="color:crimson">@Model.Ratings.ElementAt(0).RatingDislike</p>
            <p>@{int p = Model.Ratings.ElementAt(0).RatingLike - Model.Ratings.ElementAt(0).RatingDislike;}@p</p>
            <br/>
            @Html.ActionLink("UP vote",
                             "Vote",
                             "Home",
                             new { _id = Model.ArticleID.ToString(CultureInfo.InvariantCulture), up = true },
                             null)
            <br/>
            @Html.ActionLink("Down vote",
                "Vote",
                "Home",
                new { _id = Model.ArticleID.ToString(CultureInfo.InvariantCulture), up = false },
                null)

        </div>
    }
</body>



